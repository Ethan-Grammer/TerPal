{"ast":null,"code":"var _jsxFileName = \"/Users/ethan/Desktop/Projects/e-advisor/src/components/Chatbox.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport styled from 'styled-components';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Container = styled.div`\n  position: fixed;\n  bottom: 10%;\n  right: 10%;\n  left: 10%;\n  top: 10%;\n  width: auto;\n  height: auto;\n  background-color: white;\n  box-shadow: 0 0 20px rgba(0,0,0,0.2);\n  display: flex;\n  flex-direction: column;\n  border-radius: 10px;\n  overflow: hidden;\n`;\n_c = Container;\nconst MessageContainer = styled.div`\n  padding: 20px;\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  flex-grow: 1;\n`;\n_c2 = MessageContainer;\nconst InputContainer = styled.div`\n  padding: 20px;\n  background: #f8f8f8;\n`;\n_c3 = InputContainer;\nconst Input = styled.input`\n  width: 100%;\n  padding: 12px 20px;\n  box-sizing: border-box;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n`;\n_c4 = Input;\nconst Message = styled.div`\n  background-color: ${props => props.sender === 'user' ? '#dcf8c6' : '#f3f3f3'};\n  padding: 10px;\n  margin: 5px;\n  border-radius: 8px;\n  align-self: ${props => props.sender === 'user' ? 'flex-end' : 'flex-start'};\n  display: flex;\n  flex-direction: column;\n  max-width: 80%;\n  text-align: left;  // Ensure text within the bubble is left-aligned\n`;\n_c5 = Message;\nconst SenderLabel = styled.span`\n  font-size: 0.8em;\n  color: ${props => props.sender === 'user' ? '#4a4a4a' : '#4a4a4a'};\n  margin-bottom: 4px;\n  align-self: ${props => props.sender === 'user' ? 'flex-end' : 'flex-start'};\n`;\n_c6 = SenderLabel;\nfunction Chatbox() {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [file, setFile] = useState(null); // State to store the uploaded file\n\n  const handleFileChange = event => {\n    setFile(event.target.files[0]); // Capture the file\n  };\n  const sendMessage = async msg => {\n    if (msg) {\n      const newMessages = [...messages, {\n        text: msg,\n        sender: 'user',\n        label: 'You'\n      }];\n      setMessages(newMessages);\n      try {\n        const response = await axios.post('http://localhost:3001/api/chat', {\n          messages: [{\n            role: \"user\",\n            content: msg\n          }],\n          model: \"mixtral-8x7b-32768\"\n        });\n        const aiMessage = response.data.response;\n        setMessages([...newMessages, {\n          text: aiMessage,\n          sender: 'ai',\n          label: 'E-Advisor'\n        }]);\n      } catch (error) {\n        console.error('Error communicating with the chat API:', error);\n        setMessages([...newMessages, {\n          text: \"Failed to get a response.\",\n          sender: 'ai',\n          label: 'E-Advisor'\n        }]);\n      }\n    } else if (file) {\n      // Handle file upload when Enter is pressed with no message typed\n      const formData = new FormData();\n      formData.append('file', file);\n      try {\n        const response = await axios.post('http://localhost:3001/upload', formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n        setMessages([...messages, {\n          text: \"File uploaded successfully!\",\n          sender: 'system'\n        }]);\n      } catch (error) {\n        console.error('Error uploading file:', error);\n        setMessages([...messages, {\n          text: \"Failed to upload file.\",\n          sender: 'system'\n        }]);\n      }\n    }\n  };\n  const handleFileUpload = async event => {\n    const file = event.target.files[0];\n    if (file) {\n      const formData = new FormData();\n      formData.append('file', file);\n      try {\n        const response = await axios.post('http://localhost:3001/upload', formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data' // This header might be automatically set by browsers\n          }\n        });\n        alert('File uploaded successfully!');\n      } catch (error) {\n        console.error('Error uploading file:', error);\n        alert('Failed to upload file.');\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(MessageContainer, {\n      children: messages.map((message, index) => /*#__PURE__*/_jsxDEV(Message, {\n        sender: message.sender,\n        children: [/*#__PURE__*/_jsxDEV(SenderLabel, {\n          sender: message.sender,\n          children: message.label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 13\n        }, this), message.text]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(InputContainer, {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        onChange: handleFileChange,\n        style: {\n          display: 'none'\n        },\n        id: \"fileInput\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"fileInput\",\n        children: \"Choose file\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        placeholder: \"Type your message here...\",\n        onKeyDown: e => {\n          if (e.key === 'Enter' && e.target.value.trim()) {\n            e.preventDefault(); // Prevent the default form submit behavior\n            sendMessage(e.target.value);\n            e.target.value = ''; // Clear the input after sending\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 5\n  }, this);\n}\n_s(Chatbox, \"Wzw5EszYmxDDiO7Pm4Y1SLvwsFM=\");\n_c7 = Chatbox;\nexport default Chatbox;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"MessageContainer\");\n$RefreshReg$(_c3, \"InputContainer\");\n$RefreshReg$(_c4, \"Input\");\n$RefreshReg$(_c5, \"Message\");\n$RefreshReg$(_c6, \"SenderLabel\");\n$RefreshReg$(_c7, \"Chatbox\");","map":{"version":3,"names":["React","useState","styled","axios","jsxDEV","_jsxDEV","Container","div","_c","MessageContainer","_c2","InputContainer","_c3","Input","input","_c4","Message","props","sender","_c5","SenderLabel","span","_c6","Chatbox","_s","messages","setMessages","file","setFile","handleFileChange","event","target","files","sendMessage","msg","newMessages","text","label","response","post","role","content","model","aiMessage","data","error","console","formData","FormData","append","headers","handleFileUpload","alert","children","map","message","index","fileName","_jsxFileName","lineNumber","columnNumber","type","onChange","style","display","id","htmlFor","placeholder","onKeyDown","e","key","value","trim","preventDefault","_c7","$RefreshReg$"],"sources":["/Users/ethan/Desktop/Projects/e-advisor/src/components/Chatbox.js"],"sourcesContent":["import React, { useState } from 'react';\nimport styled from 'styled-components';\nimport axios from 'axios';\n\nconst Container = styled.div`\n  position: fixed;\n  bottom: 10%;\n  right: 10%;\n  left: 10%;\n  top: 10%;\n  width: auto;\n  height: auto;\n  background-color: white;\n  box-shadow: 0 0 20px rgba(0,0,0,0.2);\n  display: flex;\n  flex-direction: column;\n  border-radius: 10px;\n  overflow: hidden;\n`;\n\nconst MessageContainer = styled.div`\n  padding: 20px;\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  flex-grow: 1;\n`;\n\nconst InputContainer = styled.div`\n  padding: 20px;\n  background: #f8f8f8;\n`;\n\nconst Input = styled.input`\n  width: 100%;\n  padding: 12px 20px;\n  box-sizing: border-box;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n`;\n\nconst Message = styled.div`\n  background-color: ${props => props.sender === 'user' ? '#dcf8c6' : '#f3f3f3'};\n  padding: 10px;\n  margin: 5px;\n  border-radius: 8px;\n  align-self: ${props => props.sender === 'user' ? 'flex-end' : 'flex-start'};\n  display: flex;\n  flex-direction: column;\n  max-width: 80%;\n  text-align: left;  // Ensure text within the bubble is left-aligned\n`;\n\nconst SenderLabel = styled.span`\n  font-size: 0.8em;\n  color: ${props => props.sender === 'user' ? '#4a4a4a' : '#4a4a4a'};\n  margin-bottom: 4px;\n  align-self: ${props => props.sender === 'user' ? 'flex-end' : 'flex-start'};\n`;\n\n\nfunction Chatbox() {\n  const [messages, setMessages] = useState([]);\n  const [file, setFile] = useState(null); // State to store the uploaded file\n\n  const handleFileChange = (event) => {\n    setFile(event.target.files[0]); // Capture the file\n  };\n\n  const sendMessage = async (msg) => {\n    if (msg) {\n      const newMessages = [...messages, { text: msg, sender: 'user', label: 'You' }];\n      setMessages(newMessages);\n    \n      try {\n        const response = await axios.post('http://localhost:3001/api/chat', {\n          messages: [{ role: \"user\", content: msg }],\n          model: \"mixtral-8x7b-32768\"\n        });\n\n        const aiMessage = response.data.response;\n        setMessages([...newMessages, { text: aiMessage, sender: 'ai', label: 'E-Advisor' }]);\n      } catch (error) {\n        console.error('Error communicating with the chat API:', error);\n        setMessages([...newMessages, { text: \"Failed to get a response.\", sender: 'ai', label: 'E-Advisor' }]);\n      }\n    } else if (file) {\n      // Handle file upload when Enter is pressed with no message typed\n      const formData = new FormData();\n      formData.append('file', file);\n\n      try {\n        const response = await axios.post('http://localhost:3001/upload', formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n        setMessages([...messages, { text: \"File uploaded successfully!\", sender: 'system' }]);\n      } catch (error) {\n        console.error('Error uploading file:', error);\n        setMessages([...messages, { text: \"Failed to upload file.\", sender: 'system' }]);\n      }\n    }\n    \n  };\n\n  const handleFileUpload = async (event) => {\n    const file = event.target.files[0];\n    if (file) {\n      const formData = new FormData();\n      formData.append('file', file);\n\n      try {\n        const response = await axios.post('http://localhost:3001/upload', formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'  // This header might be automatically set by browsers\n          }\n        });\n        alert('File uploaded successfully!');\n      } catch (error) {\n          console.error('Error uploading file:', error);\n          alert('Failed to upload file.');\n      }\n    }\n  };\n\n  \n  return (\n    <Container>\n      <MessageContainer>\n        {messages.map((message, index) => (\n          <Message key={index} sender={message.sender}>\n            <SenderLabel sender={message.sender}>{message.label}</SenderLabel>\n            {message.text}\n          </Message>\n        ))}\n      </MessageContainer>\n      <InputContainer>\n        <input type=\"file\" onChange={handleFileChange} style={{ display: 'none' }} id=\"fileInput\" />\n        <label htmlFor=\"fileInput\">Choose file</label>\n        <Input\n          placeholder=\"Type your message here...\"\n          onKeyDown={(e) => {\n            if (e.key === 'Enter' && e.target.value.trim()) {\n              e.preventDefault(); // Prevent the default form submit behavior\n              sendMessage(e.target.value);\n              e.target.value = ''; // Clear the input after sending\n            }\n          }}\n        />\n      </InputContainer>\n    </Container>\n  );\n}\n  \nexport default Chatbox;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAOC,MAAM,MAAM,mBAAmB;AACtC,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,MAAMC,SAAS,GAAGJ,MAAM,CAACK,GAAI;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,EAAA,GAdIF,SAAS;AAgBf,MAAMG,gBAAgB,GAAGP,MAAM,CAACK,GAAI;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACG,GAAA,GAPID,gBAAgB;AAStB,MAAME,cAAc,GAAGT,MAAM,CAACK,GAAI;AAClC;AACA;AACA,CAAC;AAACK,GAAA,GAHID,cAAc;AAKpB,MAAME,KAAK,GAAGX,MAAM,CAACY,KAAM;AAC3B;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GANIF,KAAK;AAQX,MAAMG,OAAO,GAAGd,MAAM,CAACK,GAAI;AAC3B,sBAAsBU,KAAK,IAAIA,KAAK,CAACC,MAAM,KAAK,MAAM,GAAG,SAAS,GAAG,SAAU;AAC/E;AACA;AACA;AACA,gBAAgBD,KAAK,IAAIA,KAAK,CAACC,MAAM,KAAK,MAAM,GAAG,UAAU,GAAG,YAAa;AAC7E;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GAVIH,OAAO;AAYb,MAAMI,WAAW,GAAGlB,MAAM,CAACmB,IAAK;AAChC;AACA,WAAWJ,KAAK,IAAIA,KAAK,CAACC,MAAM,KAAK,MAAM,GAAG,SAAS,GAAG,SAAU;AACpE;AACA,gBAAgBD,KAAK,IAAIA,KAAK,CAACC,MAAM,KAAK,MAAM,GAAG,UAAU,GAAG,YAAa;AAC7E,CAAC;AAACI,GAAA,GALIF,WAAW;AAQjB,SAASG,OAAOA,CAAA,EAAG;EAAAC,EAAA;EACjB,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGzB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAAC0B,IAAI,EAAEC,OAAO,CAAC,GAAG3B,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;;EAExC,MAAM4B,gBAAgB,GAAIC,KAAK,IAAK;IAClCF,OAAO,CAACE,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAClC,CAAC;EAED,MAAMC,WAAW,GAAG,MAAOC,GAAG,IAAK;IACjC,IAAIA,GAAG,EAAE;MACP,MAAMC,WAAW,GAAG,CAAC,GAAGV,QAAQ,EAAE;QAAEW,IAAI,EAAEF,GAAG;QAAEhB,MAAM,EAAE,MAAM;QAAEmB,KAAK,EAAE;MAAM,CAAC,CAAC;MAC9EX,WAAW,CAACS,WAAW,CAAC;MAExB,IAAI;QACF,MAAMG,QAAQ,GAAG,MAAMnC,KAAK,CAACoC,IAAI,CAAC,gCAAgC,EAAE;UAClEd,QAAQ,EAAE,CAAC;YAAEe,IAAI,EAAE,MAAM;YAAEC,OAAO,EAAEP;UAAI,CAAC,CAAC;UAC1CQ,KAAK,EAAE;QACT,CAAC,CAAC;QAEF,MAAMC,SAAS,GAAGL,QAAQ,CAACM,IAAI,CAACN,QAAQ;QACxCZ,WAAW,CAAC,CAAC,GAAGS,WAAW,EAAE;UAAEC,IAAI,EAAEO,SAAS;UAAEzB,MAAM,EAAE,IAAI;UAAEmB,KAAK,EAAE;QAAY,CAAC,CAAC,CAAC;MACtF,CAAC,CAAC,OAAOQ,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,wCAAwC,EAAEA,KAAK,CAAC;QAC9DnB,WAAW,CAAC,CAAC,GAAGS,WAAW,EAAE;UAAEC,IAAI,EAAE,2BAA2B;UAAElB,MAAM,EAAE,IAAI;UAAEmB,KAAK,EAAE;QAAY,CAAC,CAAC,CAAC;MACxG;IACF,CAAC,MAAM,IAAIV,IAAI,EAAE;MACf;MACA,MAAMoB,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEtB,IAAI,CAAC;MAE7B,IAAI;QACF,MAAMW,QAAQ,GAAG,MAAMnC,KAAK,CAACoC,IAAI,CAAC,8BAA8B,EAAEQ,QAAQ,EAAE;UAC1EG,OAAO,EAAE;YACP,cAAc,EAAE;UAClB;QACF,CAAC,CAAC;QACFxB,WAAW,CAAC,CAAC,GAAGD,QAAQ,EAAE;UAAEW,IAAI,EAAE,6BAA6B;UAAElB,MAAM,EAAE;QAAS,CAAC,CAAC,CAAC;MACvF,CAAC,CAAC,OAAO2B,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;QAC7CnB,WAAW,CAAC,CAAC,GAAGD,QAAQ,EAAE;UAAEW,IAAI,EAAE,wBAAwB;UAAElB,MAAM,EAAE;QAAS,CAAC,CAAC,CAAC;MAClF;IACF;EAEF,CAAC;EAED,MAAMiC,gBAAgB,GAAG,MAAOrB,KAAK,IAAK;IACxC,MAAMH,IAAI,GAAGG,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IAClC,IAAIL,IAAI,EAAE;MACR,MAAMoB,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEtB,IAAI,CAAC;MAE7B,IAAI;QACF,MAAMW,QAAQ,GAAG,MAAMnC,KAAK,CAACoC,IAAI,CAAC,8BAA8B,EAAEQ,QAAQ,EAAE;UAC1EG,OAAO,EAAE;YACP,cAAc,EAAE,qBAAqB,CAAE;UACzC;QACF,CAAC,CAAC;QACFE,KAAK,CAAC,6BAA6B,CAAC;MACtC,CAAC,CAAC,OAAOP,KAAK,EAAE;QACZC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;QAC7CO,KAAK,CAAC,wBAAwB,CAAC;MACnC;IACF;EACF,CAAC;EAGD,oBACE/C,OAAA,CAACC,SAAS;IAAA+C,QAAA,gBACRhD,OAAA,CAACI,gBAAgB;MAAA4C,QAAA,EACd5B,QAAQ,CAAC6B,GAAG,CAAC,CAACC,OAAO,EAAEC,KAAK,kBAC3BnD,OAAA,CAACW,OAAO;QAAaE,MAAM,EAAEqC,OAAO,CAACrC,MAAO;QAAAmC,QAAA,gBAC1ChD,OAAA,CAACe,WAAW;UAACF,MAAM,EAAEqC,OAAO,CAACrC,MAAO;UAAAmC,QAAA,EAAEE,OAAO,CAAClB;QAAK;UAAAoB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAc,CAAC,EACjEL,OAAO,CAACnB,IAAI;MAAA,GAFDoB,KAAK;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAGV,CACV;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACc,CAAC,eACnBvD,OAAA,CAACM,cAAc;MAAA0C,QAAA,gBACbhD,OAAA;QAAOwD,IAAI,EAAC,MAAM;QAACC,QAAQ,EAAEjC,gBAAiB;QAACkC,KAAK,EAAE;UAAEC,OAAO,EAAE;QAAO,CAAE;QAACC,EAAE,EAAC;MAAW;QAAAR,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAC5FvD,OAAA;QAAO6D,OAAO,EAAC,WAAW;QAAAb,QAAA,EAAC;MAAW;QAAAI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAC9CvD,OAAA,CAACQ,KAAK;QACJsD,WAAW,EAAC,2BAA2B;QACvCC,SAAS,EAAGC,CAAC,IAAK;UAChB,IAAIA,CAAC,CAACC,GAAG,KAAK,OAAO,IAAID,CAAC,CAACtC,MAAM,CAACwC,KAAK,CAACC,IAAI,CAAC,CAAC,EAAE;YAC9CH,CAAC,CAACI,cAAc,CAAC,CAAC,CAAC,CAAC;YACpBxC,WAAW,CAACoC,CAAC,CAACtC,MAAM,CAACwC,KAAK,CAAC;YAC3BF,CAAC,CAACtC,MAAM,CAACwC,KAAK,GAAG,EAAE,CAAC,CAAC;UACvB;QACF;MAAE;QAAAd,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACY,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACR,CAAC;AAEhB;AAACpC,EAAA,CA5FQD,OAAO;AAAAmD,GAAA,GAAPnD,OAAO;AA8FhB,eAAeA,OAAO;AAAC,IAAAf,EAAA,EAAAE,GAAA,EAAAE,GAAA,EAAAG,GAAA,EAAAI,GAAA,EAAAG,GAAA,EAAAoD,GAAA;AAAAC,YAAA,CAAAnE,EAAA;AAAAmE,YAAA,CAAAjE,GAAA;AAAAiE,YAAA,CAAA/D,GAAA;AAAA+D,YAAA,CAAA5D,GAAA;AAAA4D,YAAA,CAAAxD,GAAA;AAAAwD,YAAA,CAAArD,GAAA;AAAAqD,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}